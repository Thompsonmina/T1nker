
import Test = Test.Next;
#import "BaseEscrow.jsligo" "BaseEscrow"


/* Record type that the entry-point expects */
type validSecretParams = {
  secret   : bytes,
  hashlock : bytes,
};

const runTest = () => {

    let initial_storage: bool = false;
    let orig = Test.Originate.contract(contract_of(BaseEscrow.BaseEscrow), initial_storage, 0tez); 
    
    const hashlock: bytes = 0xdbbd4da5904e6a51e3af21d4eec1019f97b0cc5ac232b1cf55d694d1c6cbfb98;
    const secret:bytes = 0x9ce44a1882f9883e16313298f101426b40a29307dc3f9a7900da5c7a88c2954f;
    Test.Contract.transfer_exn(Test.Typed_address.get_entrypoint("isvalidSecretEntry", orig.taddr), [secret, hashlock], 0tez);
    return Assert.assert(Test.Typed_address.get_storage(orig.taddr) == false);
};

const test1 = runTest();
